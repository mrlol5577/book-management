{% extends 'base.html' %}

{% block title %}
запись добавка
{% endblock %}

{% block body %}
    <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3 container" method="GET" action="/books" style="display: flex; gap: 10px; align-items: center;"> 
        <input type="search" name="search" id="searchInput" class="search form-control form-control-dark text-bg-white" placeholder="Пошук по назві..." aria-label="Search" value="{{ search_query if search_query else '' }}">
        <select name="chose" id="buyerSelect" class="form-select" style="width: auto;">
            <option value="все" {% if search_type == 'все' %}selected{% endif %}>Все</option>
            <option value="назва" {% if search_type == 'назва' %}selected{% endif %}>Назва</option>
            <option value="автор" {% if search_type == 'автор' %}selected{% endif %}>Автор</option>
            <option value="ean" {% if search_type == 'ean' %}selected{% endif %}>EAN</option>
            <option value="імя" {% if search_type == 'імя' %}selected{% endif %}>Ім'я</option>
            <option value="телефон" {% if search_type == 'телефон' %}selected{% endif %}>Телефон</option>
        </select>
    </form>

    <script>
        const searchInput = document.getElementById('searchInput');
        const buyerSelect = document.getElementById('buyerSelect');
        
        const placeholders = {
            'все': 'Пошук...',
            'назва': 'Пошук по назві...',
            'автор': 'Пошук по автору...',
            'ean': 'Пошук по EAN...',
            'імя': 'Пошук по імені...',
            'телефон': 'Пошук по телефону...'
        };
        
        function updatePlaceholder() {
            const selectedValue = buyerSelect.value;
            searchInput.placeholder = placeholders[selectedValue] || 'Пошук...';
        }
        
        buyerSelect.addEventListener('change', updatePlaceholder);
        updatePlaceholder();
    </script>
    

{% if books %}
    {% for el in books %}
    <div class="gigi">
        <div class="didi container {% if el.stat == 'є' %}border-red{% else %}border-green{% endif %}">
            <div class="">
                <div class="book-header" style="display: flex; justify-content: space-between; align-items: center;">
                    <p class="tutu" style="margin: 0;">Назва книги: {{ el.name_book }}</p>
                    {% if current_user.is_authenticated %}
                    <a href='/books/{{el.id}}' style="width:150px;" class="btn {% if el.stat == 'є' %}btn-danger{% else %}btn-success{% endif %}">Переглянути</a>
                    {% endif %}

                </div>
                <p class="tutu" style="margin-bottom: 6px;">Автор: {{ el.author }}</p>
                <p class="tutu" style="margin-bottom: 6px;">EAN: {{ el.ean }}</p> 

                
            </div>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="container mt-3">
        <p class="text-center">Нічого не знайдено за запитом "{{ search_query }}"</p>
    </div>
{% endif %}
{% endblock %}