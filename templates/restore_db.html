{% extends 'base.html' %}

{% block title %}
–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
{% endblock %}

{% block body %}

<div class="container" style="max-width: 800px; margin: 0 auto; padding: 20px;">

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div style="
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(220, 53, 69, 0.3);
        margin-bottom: 30px;
        text-align: center;
    ">
        <h2 style="margin: 0; color: white; font-size: 1.8em;">
            üîÑ –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
        </h2>
        <p style="margin: 10px 0 0 0; color: rgba(255,255,255,0.9); font-size: 1em;">
            ‚ö†Ô∏è –£–≤–∞–≥–∞! –ü–æ—Ç–æ—á–Ω–∞ –±–∞–∑–∞ –±—É–¥–µ –∑–∞–º—ñ–Ω–µ–Ω–∞ –Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—É
        </p>
    </div>

    <!-- –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è -->
    <div style="
        background: #fff3cd;
        border: 2px solid #ffc107;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 30px;
    ">
        <h4 style="margin: 0 0 15px 0; color: #856404;">‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:</h4>
        <ul style="margin: 0; padding-left: 20px; color: #856404; line-height: 1.8;">
            <li>–ü–æ—Ç–æ—á–Ω–∞ –±–∞–∑–∞ –±—É–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–∞ —è–∫ backup</li>
            <li>–ó–∞–≤–∞–Ω—Ç–∞–∂—É–π—Ç–µ —Ç—ñ–ª—å–∫–∏ —Ñ–∞–π–ª–∏ .db —Ñ–æ—Ä–º–∞—Ç—É</li>
            <li>–ü—ñ—Å–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É</li>
            <li>–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ñ–∞–π–ª –Ω–µ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–π</li>
        </ul>
    </div>

    <!-- –§–æ—Ä–º–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è -->
    <form method="POST" enctype="multipart/form-data" style="
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    ">
        
        <div style="margin-bottom: 25px;">
            <label style="
                display: block;
                margin-bottom: 10px;
                color: #333;
                font-weight: 600;
                font-size: 1.1em;
            ">
                üìÅ –í–∏–±–µ—Ä—ñ—Ç—å —Ñ–∞–π–ª –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (.db)
            </label>
            
            <input type="file" 
                   name="database" 
                   accept=".db" 
                   required
                   style="
                       width: 100%;
                       padding: 15px;
                       border: 2px dashed #667eea;
                       border-radius: 8px;
                       background: #f8f9ff;
                       cursor: pointer;
                       font-size: 1em;
                   "
                   onchange="showFileName(this)">
            
            <small id="fileName" style="display: block; margin-top: 10px; color: #666; font-style: italic;">
                –§–∞–π–ª –Ω–µ –≤–∏–±—Ä–∞–Ω–æ
            </small>
        </div>

        <div style="
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #17a2b8;
            margin-bottom: 25px;
        ">
            <p style="margin: 0; color: #333; font-size: 0.95em;">
                üí° <strong>–ü–æ—Ä–∞–¥–∞:</strong> –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
            </p>
        </div>

        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
            <button type="submit" 
                    class="btn btn-danger"
                    style="
                        padding: 12px 30px;
                        font-size: 1.1em;
                        border-radius: 8px;
                        font-weight: 600;
                    "
                    onclick="return confirm('‚ö†Ô∏è –í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ? –ü–æ—Ç–æ—á–Ω–∞ –±–∞–∑–∞ –±—É–¥–µ –∑–∞–º—ñ–Ω–µ–Ω–∞!')">
                üîÑ –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö
            </button>

            <a href="/books" 
               class="btn btn-secondary"
               style="
                   padding: 12px 30px;
                   font-size: 1.1em;
                   border-radius: 8px;
                   text-decoration: none;
               ">
                ‚ùå –°–∫–∞—Å—É–≤–∞—Ç–∏
            </a>
        </div>
    </form>

    <!-- –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
    <div style="
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        margin-top: 30px;
    ">
        <h4 style="color: #333; margin: 0 0 15px 0;">üìö –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?</h4>
        <ol style="margin: 0; padding-left: 20px; color: #666; line-height: 1.8;">
            <li>–ü–æ—Ç–æ—á–Ω–∞ –±–∞–∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —è–∫ backup</li>
            <li>–í–∞—à —Ñ–∞–π–ª .db –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä</li>
            <li>–°—Ç–∞—Ä–∏–π —Ñ–∞–π–ª –∑–∞–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ –Ω–æ–≤–∏–π</li>
            <li>–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –∑ –Ω–æ–≤–æ—é –±–∞–∑–æ—é</li>
        </ol>
    </div>

</div>

<script>
function showFileName(input) {
    const fileName = document.getElementById('fileName');
    if (input.files && input.files[0]) {
        const file = input.files[0];
        const size = (file.size / 1024).toFixed(2); // KB
        fileName.textContent = `‚úÖ –í–∏–±—Ä–∞–Ω–æ: ${file.name} (${size} KB)`;
        fileName.style.color = '#28a745';
        fileName.style.fontWeight = '600';
    } else {
        fileName.textContent = '–§–∞–π–ª –Ω–µ –≤–∏–±—Ä–∞–Ω–æ';
        fileName.style.color = '#666';
        fileName.style.fontWeight = 'normal';
    }
}
</script>

<style>
input[type="file"]:hover {
    border-color: #764ba2;
    background: #f0f0ff;
}

button:hover, .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    transition: all 0.3s;
}
</style>

{% endblock %}